<!DOCTYPE html>
<html>

<head>
    <title>Change Password</title>
    <link rel="stylesheet" type="text/css" href="../static/password_change.css">
    <style>
        .message {
            color: red;
            font-weight: bold;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <h1>Change Password</h1>
    <form action="/student_password_change" method="POST" id="password-form">
        <label for="email">Email:</label>
        <input type="email" name="email" placeholder="Please enter your email here" required>
        <br>
        <label for="new_password">New Password:</label>
        <input type="password" name="new_password" placeholder="Please enter your new password here" required>
        <br>
        <label for="confirm_password">Confirm Password:</label>
        <input type="password" name="confirm_password" placeholder="Please confirm your new password here" required>
        <br>
        <br>
        <input type="submit" value="Submit" name="submit">
    </form>

    <div id="message"></div>

    <script>
        var formPassword = document.querySelector('#password-form');
        var message = document.querySelector('#message');
        var error = document.createElement('div');

        formPassword.addEventListener('submit', function (e) {
            e.preventDefault();

            var email = document.querySelector('input[name=email]').value.trim();
            var newPassword = document.querySelector('input[name=new_password]').value.trim();
            var confirm_password = document.querySelector('input[name=confirm_password]').value.trim();

            // Check if the email is empty or doesn't have the correct format
            if (email === '' || !/^\S+@\S+\.\S+$/.test(email)) {
                error.textContent = 'Please enter a valid email address.';
                error.classList.add('message');
                message.appendChild(error);
                return;
            }

            if (newPassword === '') {
                // Display error message
                error.textContent = 'Please enter a new password.';
                error.classList.add('message');
                message.appendChild(error);
                return;
            }

            if (confirm_password === '') {
                // Display error message
                error.textContent = 'Please confirm your new password.';
                error.classList.add('message');
                message.appendChild(error);
                return;
            }

            if (newPassword !== confirm_password) {
                // Display error message
                error.textContent = 'New password and confirm password do not match.';
                error.classList.add('message');
                message.innerHTML = ''; // Clear any previous error messages
                message.appendChild(error);
                return;
            }

            formPassword.submit();
        });

    </script>
</body>

</html>